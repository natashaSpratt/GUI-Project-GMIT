<!doctype html>
<html lang="en">
<head>
  <style>
  #registerButton {position: absolute;}
  #logInButton {position: absolute;}
  </style>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!--Font Awesome link-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  <!--link to stylesheet css-->
  <link rel="stylesheet" type="text/css" href="style.css" />
    <!--link to google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet">

  <title>Home Page</title>

</head>
<body>
  <!-- Nav Bar  -->
  <nav class="navbar navbar-expand-lg nav-custom">
    <a class="navbar-brand" href="index.html">GM STYLE</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Nav Bar Collapse menu -->
    <div class="collapse navbar-collapse " id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <!-- Nav Bar  dropdown Menu for products -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Shop</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="clothing.html">Clothing</a>
              <a class="dropdown-item" href="sports.html">Sports</a>
              <a class="dropdown-item" href="accessories.html">Accessories</a>
            </div>
          </li>
          <!--Navbar link to Cart -->
          <li class="nav-item">
            <a class="nav-link" href="cart.html"><i class="fas fa-shopping-basket"></i>   Cart</a>
          </li>
        </ul>

        <div>
          <!--Login button -->
          <button id="logInButton"type="button my-4 my-lg-0" class="btn btn-primary custom-btn" data-toggle = "modal" data-target = "#loginModal"><i class="fas fa-unlock"></i>    Login</button>
          <!--Register button -->
          <button id="registerButton"type="button my-4 my-lg-0" class="btn btn-primary custom-btn" data-toggle = "modal" data-target = "#registerModal"><i class="fas fa-unlock"></i>    Register</button>
          <!-- Profile Button-->
          <button id="profile"type="button my-4 my-lg-0" class="btn btn-primary custom-btn " data-toggle = "modal" data-target = "#profileEditModal"><i class="fas fa-unlock"></i>    Profile</button>
          <!-- Log Out Button-->
          <button id="logOut"type="button my-4 my-lg-0" class="btn btn-primary custom-btn"><i class="fas fa-unlock"></i>    LogOut</button>
        </div>

        <!-- Modal for login button-->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel"><b>Login</b></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <center>
                  <!-- Login Form  -->
                  <div class="form-group row">
                    <label for="email_address" class="col-md-4 col-form-label text-md-right">E-Mail Address</label>
                    <div class="col-md-6">
                      <input type="text" id="inputEmail" class="form-control" name="email-address" required autofocus>
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="password" class="col-md-4 col-form-label text-md-right">Password</label>
                    <div class="col-md-6">
                      <input type="password" id="inputPassword" class="form-control" name="password" required>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <!-- Button or input for login -->
                    <input type="submit" value="Register">
                    <button type="submit" id="checker" class="btn btn-primary">Login</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal for register button-->
          <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="loginModalLabel"><b>Welcome to Register menu.</b></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="container">
                    <div class="row centered-form">

                      <div class="panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Please fill up all of the fields</h3>
                        </div>
                        <div class="panel-body">
                          <form role="form">
                            <div class="row">
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="text" name="first_name" id="first_name" class="form-control input-sm" placeholder="First Name">
                                </div>
                              </div>
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="text" name="last_name" id="last_name" class="form-control input-sm" placeholder="Last Name">
                                </div>
                              </div>
                            </div>

                            <div class="form-group">
                              <input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email Address">
                            </div>

                            <div class="row">
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="password" name="password" id="password" class="form-control input-sm" placeholder="Password">
                                </div>
                              </div>
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="password" name="password_confirmation" id="password_confirmation" class="form-control input-sm" placeholder="Confirm Password">
                                </div>
                              </div>
                            </div>

                            <input type="submit" value="Register" id ="addder" class="btn btn-info btn-block">

                          </form>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal for Profile button-->
          <div class="modal fade" id="profileEditModal" tabindex="-1" role="dialog" aria-labelledby="profileEditModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="loginModalLabel"><b>Welcome to Profile menu.</b></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="container">
                    <div class="row centered-form">

                      <div class="panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">You can change all the field by filling it up and clicking the button edit</h3>
                        </div>
                        <div class="panel-body">
                          <form role="form">
                            <div class="row">
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="text" name="first_name" id="firstName" class="form-control input-sm" placeholder="First Name">
                                </div>
                              </div>
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="text" name="last_name" id="lastName" class="form-control input-sm" placeholder="Last Name">
                                </div>
                              </div>
                            </div>

                            <div class="form-group">
                              <input type="email" name="email" id="userEmail" class="form-control input-sm" placeholder="Email Address">
                            </div>

                            <div class="row">
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="password" name="password" id="userPassword" class="form-control input-sm" placeholder="Password">
                                </div>
                              </div>
                              <div class="col-xs-6 col-sm-6 col-md-6">
                                <div class="form-group">
                                  <input type="password" name="password_confirmation" id="newPassword" class="form-control input-sm" placeholder="New Password">
                                </div>
                              </div>
                            </div>

                            <input type="submit" value="Edit" id ="editer" class="btn btn-info btn-block">

                          </form>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
        <!-- End of Bootstrap Nav Bar  -->
        <!-- Linkbar and information  -->
        <div class="containerLinkBar">
          <!--   -->
          <div class="row justify-content-md-left">
            <div class="col linkbar">
              <a href ="https://dpd.ie/" class = "link-linkbar" >FREE SHIPPING ON ORDERS OVER €50*</a>
            </div>
            <div class="col linkbar">
              <a href ="https://dpd.ie/" class = "link-linkbar" >Free Returns</a>
            </div>
            <div class="col linkbar">
              <a href ="https://www.facebook.com/" class = "link-linkbar" >Facebook</a>
            </div>
            <div class="col linkbar">
              <a href ="https://www.instagram.com/" class = "link-linkbar" >Instagram</a>
            </div>
          </div>
        </div>
        <!-- End of linkbar  -->
        <!-- Container for carousel and images and sidebars  -->
        <div class="row no-gutters">
          <div class="col-lg-3 col-xl-3 col-sm-12 col-xs-12 mx-auto">
            <div class="card card-right">
              <img src="climb.jpg" class="card-img-top img-fluid" alt="..." >
              <div class="card-body">
                <h5 class="card-title">Sports and Rec</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, s</p>
                <a href="sports.html" class="btn btn-primary custom-btn custom-card-btn">Go somewhere</a>
              </div>
            </div>
          </div>
          <!-- Carousel Bootstrap  -->
          <div class="bd-example col-lg-6 col-xl-6 col-sm-12 col-xs-12 mx-auto" >
            <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
              </ol>
              <div class="carousel-inner">
                <div class="carousel-item active ">
                  <img src="bike.jpg" class="d-block " alt="bike helmet image">
                  <div class="carousel-caption d-none d-md-block">
                    <h2>Lorem Ipsum</h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt</p>
                  </div>
                </div>
                <div class="carousel-item">
                  <img src="clothing.jpg" class="d-block" alt="clothing image">
                  <div class="carousel-caption d-none d-md-block">
                    <h2>Lorem Ipsum Second</h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt</p>
                  </div>
                </div>
                <div class="carousel-item">
                  <img src="Accessories.jpg" class="d-block" alt="accesories image">
                  <div class="carousel-caption d-none d-md-block">
                    <h2 style = "color:black">Lorem Ipsum Third</h2>
                    <p  style = "color:black">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt</p>
                  </div>
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>
          <!-- Bootstrap Carousel End -->
          <!-- Image links stacked on right-->
          <div class="image col-lg-3 col-xl-3 col-sm-12 col-xs-12 mx-auto">
            <a href="accessories.html"><img class="image card-right"  src="persol.jpg" style=""></a>
            <a href="sport.html"><img class="image card-right"  src="football.jpg" style=""></a>
            <a href="clothing.html"><img class="image card-right"  src="sportClimb.jpg" style=""></a>
          </div>
          <!--End of Image links-->
          <!-- Footer -->
          <div class = "footer col-lg-12 col-xl-12 col-sm-12 col-xs-12 mx-auto">
          <footer class="footer ">
            <!-- Copyright -->
            <div class="footer-copyright">2019 Copyright:
              <a href="https://www.gmit.ie/" class = "footer-link"> GmStyle.com</a>
            </div>
            <!-- Copyright -->

          </footer>
          <!-- Footer -->
        </div>
        </div>

        <!-- Cantainer For Carousel and Sidebars end-->


        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
      </body>
      </html>
      <script>
      let permissionToResetItem = localStorage.getItem('itemReset');//checking variable for null
      permissionToResetItem = JSON.parse(permissionToResetItem);
      let value = false;
      if(permissionToResetItem == undefined){
        localStorage.setItem('item1', value); // set the item1
        localStorage.setItem('item2', value); // set the item2
        localStorage.setItem('item3', value); // set the item3
        localStorage.setItem('item4', value); // set the item4
        localStorage.setItem('item5', value); // set the item5
        localStorage.setItem('item6', value); // set the item6
        localStorage.setItem('item7', value); // set the item7
        localStorage.setItem('item8', value); // set the item8
        localStorage.setItem('item9', value); // set the item9
        localStorage.setItem('item9', value); // set the item9
        localStorage.setItem('itemReset', value); // set the item9
      }

      let permissionToStart = localStorage.getItem('logStarter');//checking variable for null
      permissionToStart = JSON.parse(permissionToStart);

      let permissionToStart2 = localStorage.getItem('regStarter');
      permissionToStart2 = JSON.parse(permissionToStart2);
      if(permissionToStart == null || permissionToStart2 == null){ //if its null will put the checkstarter to false
        let start = {checkStarter: false} //when registred setting logginchecker to false into local storage
        localStorage.setItem("starter", JSON.stringify(start));
      }
      else{ // will put the checkstarter to true
        let start = {checkStarter: true} //when registred setting logginchecker to false into local storage
        localStorage.setItem("starter", JSON.stringify(start));
      }
      let getStarter = localStorage.getItem('starter'); // getting information from the local storage
      getStarter = JSON.parse(getStarter);

      <!-- Register array creation and button for event listener -->
      let account = [];
      const registerButton = document.getElementById("addder");

      <!-- Loggin details validation button for event listner and function for to check if the details match the database-->
      const button = document.getElementById("checker");
      let itemName = localStorage.getItem('account');
      itemName = JSON.parse(itemName);
      document.getElementById("logInButton").style.right = "125px";//moving div element to the right
      document.getElementById("registerButton").style.right = "12px"; //moving the div element to the left
      let hideLoginButton = "none";
      hideLoginButton = document.getElementById('logInButton'); // link the hideLoginButton to logInButton id
      let hideRegisterButton = "none";
      hideRegisterButton = document.getElementById('registerButton'); // link the hideRegisterButton to hideRegisterButton id
      let profileButton = "none";
      profileButton = document.getElementById('profile'); // link the profileButton to profileButton id
      let userLogOutButton = "none";
      userLogOutButton = document.getElementById('logOut'); // link the userLogOutButton to userLogOutButton id
      userLogOutButton.style.visibility = 'hidden'; //hiding the button
      profileButton.style.visibility = 'hidden';
      if(getStarter.checkStarter == true){
        let check = JSON.parse(localStorage.checkLoggin);//cloning the data for checkloggin from the local storage
        let getPosition = localStorage.getItem('counter');
        getPosition = JSON.parse(getPosition);
        let getcounter = getPosition.possition;

        if(check.logginChecker == true ){ //checking if its true it will hide the loggin button
          hideLoginButton.style.visibility = 'hidden';
          hideRegisterButton.style.visibility = 'hidden';
          profileButton.style.visibility = 'visible';
          userLogOutButton.style.visibility = 'visible';
          document.getElementById("firstName").value = itemName[getcounter].fName;
          document.getElementById("lastName").value = itemName[getcounter].lName;
          document.getElementById("userEmail").value = itemName[getcounter].email;
          document.getElementById("userPassword").value = itemName[getcounter].password;
        }
        else{//if its not true it will leave it visible
          hideLoginButton.style.visibility = 'visible';
          hideRegisterButton.style.visibility = 'visible';
          profileButton.style.visibility = 'hidden';
          userLogOutButton.style.visibility = 'hidden';
        }

      }
      button.addEventListener("click", function() { //event listener when its clicked to activate the function
        let loggin = {logginChecker: false}
        localStorage.checkLoggin = JSON.stringify(loggin);
        let email = document.getElementById('inputEmail').value;
        let password = document.getElementById('inputPassword').value;
        let found = false;
        let entriesJSON = localStorage.getItem('account');// copy the data from local storage that was stored in account
        if (!entriesJSON) { //if there is no data output and error
          alert("Nothing stored!");
          return;
        }
        let allEntries = JSON.parse(entriesJSON);
        for (let i = 0; i < allEntries.length; i++) {// loop to validate username and password from the account table
          let entry = allEntries[i];
          let storedUserName = entry.email;
          let storedPassWord = entry.password;
          let storedEmailAddress = entry.email;
          if (email == storedUserName && password == storedPassWord) { //checking if the username that was typed match the information stored in the account
            let counter = {possition: i}
            localStorage.counter = JSON.stringify(counter);
            alert("Successfully logged in!");
            let loggin = {logginChecker: true} // rewrite the logginChekcer to true
            localStorage.checkLoggin = JSON.stringify(loggin);
            found = true;
            hideLoginButton.style.visibility = 'hidden';
            window.location.reload()
            let start = {checkStarter: true} //when registred setting logginchecker to false into local storage
            localStorage.setItem("logStarter", JSON.stringify(start));
            return;
          }
          else {
            found = false; // if its not a match it will set the boolean to false so we can output it as an error later
          }
        }
        if(found == false){// if the match wasn't succsessfull it will output and error to try again
        alert('Invalid Username or Password! Please try again.');
      }
    })


    registerButton.addEventListener("click", function() {


      // Parse any JSON previously stored in allEntries
      let loggin = {logginChecker: false} //when registred setting logginchecker to false into local storage
      localStorage.setItem("checkLoggin", JSON.stringify(loggin));
      let start = {checkStarter: true} //when registred setting logginchecker to true into local storage
      localStorage.setItem("regStarter", JSON.stringify(start));
      let existingEntries = JSON.parse(localStorage.getItem("account")); //parsing the existingEntries from the account in local storage
      if(existingEntries == null) existingEntries = []; // if its null it creating an object
      let firstName = document.getElementById("first_name");//creating an variable to take information from the input box
      let lastName = document.getElementById("last_name");
      let userEmail = document.getElementById("email");
      let userPassword = document.getElementById("password");
      let entry = {
        fName: firstName.value,
        lName: lastName.value,
        email: userEmail.value,
        password: userPassword.value
      }; // storing the information into an aray
      if (entry.fName === "" || entry.lName === ""  || entry.email === "" || entry.password === ""){// if the field are  empty alerting an error
        alert("Please fill up all the missing fields")
      }
      else{ // otherwise
        localStorage.setItem("account", JSON.stringify(entry)); // it will take the array and stringify it as an object array
        existingEntries.push(entry); //     // Save allEntries back as an array of the object to local storage
        localStorage.setItem("account", JSON.stringify(existingEntries));
        alert("You have been successfully registred. You can Log in now. Thanks you!")
      }

    })

    const logOutButton = document.getElementById("logOut");

    logOutButton.addEventListener("click", function() {//event listener with function to set the loginchecker to false and reload the page
      // Parse any JSON previously stored in allEntries
      let loggin = {logginChecker: false} // rewrite the logginChekcer to false;
      localStorage.checkLoggin = JSON.stringify(loggin);
      location.reload();//reloading the page
    })

    const userEdit = document.getElementById("editer");

    userEdit.addEventListener("click", function() { //event listener when its clicked to activate the function
      //let existingEntries = JSON.parse(localStorage.getItem("account")); //parsing the existingEntries from the account in local storage
      let getPosition = localStorage.getItem('counter');
      getPosition = JSON.parse(getPosition);

      let getcounter = getPosition.possition;
      let existingEntries = localStorage.getItem('account');
      existingEntries = JSON.parse(existingEntries);
      if(existingEntries == null) existingEntries = []; // if its null it creating an object
      let firstName = document.getElementById("firstName");//creating an variable to take information from the input box
      let lastName = document.getElementById("lastName");
      let userEmail = document.getElementById("userEmail");
      let userPassword = document.getElementById("newPassword");
      let entry = {
        fName: firstName.value,
        lName: lastName.value,
        email: userEmail.value,
        password: userPassword.value
      }; // storing the information into an aray
      if (entry.fName === "" || entry.lName === ""  || entry.email === "" || entry.password === ""){// if the field are  empty alerting an error
        alert("Please fill up all the missing fields")
      }
      else{ // otherwise
        localStorage.setItem("account", JSON.stringify(entry)); // it will take the array and stringify it as an object array
        existingEntries[getcounter].fName = firstName.value;
        existingEntries[getcounter].lName = lastName.value;
        existingEntries[getcounter].email = userEmail.value;
        existingEntries[getcounter].password = userPassword.value;
        localStorage.setItem("account", JSON.stringify(existingEntries));
        alert("You have been successfully Changed them.")
      }
    })

    //--Trying to randomly change the images on the  carousel-
    var x = document.getElementsByClassName("");
var randomIndex = new Array();

function shuffle() {
    for(i=0; i<x.length; i++){
        randomIndex.push(i);
    }

    //http://stackoverflow.com/a/18650169/1582080
    randomIndex.sort(function() {
        return .5-Math.random();
    });
}

function carousel() {
    var i;
    for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
    }
    myIndex++;
    if (myIndex > x.length) {myIndex = 1}
    x[randomIndex[myIndex-1]].style.display = "block";
    setTimeout(carousel, 2000); // Change image every 2 seconds
}

var myIndex = Math.floor(Math.random()*x.length);
shuffle();
carousel();



    </script>
